@page "/manage-tables"
@attribute [Authorize(Roles = "Admin")]
@using Microsoft.AspNetCore.Authorization
@using RestaurantOrderManager.Client.Services
@using RestaurantOrderManager.Shared.Models

<h3 class="mt-4 mb-3 text-center">Table Management</h3>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger text-center">@errorMessage</div>
}

<div class="container">
    <table class="table table-striped table-hover border text-center mt-4">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Order Number</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (tables != null)
            {
                @foreach (var table in tables)
                {
                    <tr>
                        <td>@table.Id</td>
                        <td>@(table.OrderNumber != 0 ? table.OrderNumber : "No Order for Table")</td>
                        <td>@table.Status</td>
                        <td>
                            <button class="btn btn-danger btn-sm" @onclick="() => RemoveTable(table.Id)">
                                <i class="bi bi-trash"></i> Remove
                            </button>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>

    <div class="card mt-5 mx-auto" style="max-width: 400px;">
        <div class="card-body">
            <button class="btn btn-success w-100" @onclick="AddTable">
                <i class="bi bi-plus-circle"></i> Add Table
            </button>
        </div>
    </div>
</div>