@page "/menu-editor"
@attribute [Authorize(Roles = "Admin")]
@using Microsoft.AspNetCore.Authorization
@using RestaurantOrderManager.Shared.Models
@using RestaurantOrderManager.Client.Services

<h3 class="mt-4 mb-3 text-center">Manage Menu</h3>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger text-center">@errorMessage</div>
}

<div class="container">
    <table class="table table-striped table-hover border text-center mt-4">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Description</th>
                <th>Price</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (menuItems != null)
            {
                @foreach (var item in menuItems)
                {
                    <tr>
                        <td>@item.Id</td>
                        <td>@item.Name</td>
                        <td>@item.Description</td>
                        <td>@item.Price.ToString("C")</td>
                        <td>
                            <button class="btn btn-danger btn-sm" @onclick="() => RemoveMenuItem(item.Id)">
                                <i class="bi bi-trash me-1"></i> Remove
                            </button>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>

    <div class="card mt-5 mx-auto" style="max-width: 400px;">
        <div class="card-body">
            <h5 class="card-title mb-3">Add Menu Item</h5>
            <div class="mb-3">
                <label class="form-label">Name</label>
                <input class="form-control" @bind="newMenuItem.Name" />
            </div>
            <div class="mb-3">
                <label class="form-label">Description</label>
                <input class="form-control" @bind="newMenuItem.Description" />
            </div>
            <div class="mb-3">
                <label class="form-label">Price</label>
                <input class="form-control" @bind="newMenuItem.Price" type="number" step="0.01" min="0" />
            </div>
            <button class="btn btn-success w-100" @onclick="AddMenuItem">
                <i class="bi bi-plus-circle me-1"></i> Add Item
            </button>
        </div>
    </div>
</div>